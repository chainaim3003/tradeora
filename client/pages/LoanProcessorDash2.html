<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Loan Dash</title>
    <link rel="stylesheet" href="../sass/main.css" />
    <link rel="stylesheet" href="../sass/custom.css" />
  </head>
  <body>
    <div class="py-2 px-5">
      <nav class="navbar navbar-expand-lg navbar-dark">
        <a class="navbar-brand text-white pl-3" href="/">
          <img
            src="../assets/finitylogo.png"
            width="240px"
            class="d-inline-block align-top font-weight-bold"
            alt="Logo"
            loading="lazy"
          />
          &nbsp;
        </a>

        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon" />
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-5 mt-3 mr-auto">
            <li class="nav-item active px-2">
              <a class="nav-link text-white font-weight-bold h5" href="/">
                Home <span class="sr-only">(current)</span>
              </a>
            </li>
          </ul>
          <div class="mx-2">
            <a
              class="btn btn-success my-2 my-sm-0 mx-2 px-4 py-2"
              type="submit"
              href="KiranaLogin.html"
            >
              Logout
            </a>
          </div>
        </div>
      </nav>
    </div>


    <script src="../../node_modules/axios/dist/axios.min.js"></script>

    <script>

               function processFetch(){

                 processFetchIncomeTaxReturns();
                 processBillofLadingVerification();

                 window.location.href='LPCustomerDetails.html';

               }


               function processFetchIncomeTaxReturns(){

                 //var axios = require('axios');

                 var config = {
                   method: 'get',
                   url: 'http://localhost:5000/fetchIncomeTaxReturns/fromDate/2017-01-01/toDate/2020-08-01/pan/ACMEN12345',
                   headers: { }
                 };

                 axios(config)
                 .then(function (response) {
                   console.log(JSON.stringify(response.data));
                 })
                 .catch(function (error) {
                   console.log(error);
                 });


               }


                function processBillofLadingVerification(){

                  //alert(' in process fetch ...');

                  //var axios = require('axios');
                  var data = JSON.stringify({"billOfLadingNumber":"TestBoL1003CFS","oceanCarrierCode":"TSTC","consignorPrintedParty":"Test Consignor Printed Party1 STREET ADDRESS City, 03039, Country"});

                  var config = {
                    method: 'post',
                    url: 'http://localhost:5000/verify/billOfLading',
                    headers: {
                      'Content-Type': 'application/json'
                    },
                    data : data
                  };

                  axios(config)
                  .then(function (response) {
                    console.log(JSON.stringify(response.data));
                  })
                  .catch(function (error) {
                    console.log(error);
                  });
              }
        </script>

    <div class="container">
      <h1 class="pt-5">Loan Dashboard</h1>

      <br>
      <div class="card bg-dark text-center">
        <div class="card-body">
          <center><h3 class=" card-title ">List of Loan Applicants</h3></center>
          <br>
          <table class="table table-striped table-dark p-5">
            <thead>
              <tr>
                <th scope="col">Index</th>
                <th scope="col">Name</th>
                <th scope="col">Account Aggregator ID</th>
                <th scope="col">Consent Recieved</th>
                <th scope="col">&nbsp;</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">1</th>
                <td>Kiran Selvan</td>
                <td>7016400304@onemoney</td>
                <td><p class="text-success">Yes</p></td>
                <td>

                  &nbsp;&nbsp;

<!--
                  <button type="button" class="btn btn-tertiary px-3" onclick="window.location.href='LPCustomerDetails.html'">
                    Proceess
                  </button>

-->
                  <button type="button" class="btn btn-tertiary px-3" onclick="processFetch()">
                    Proceess
                  </button>



                </td>
              </tr>

            </tbody>
          </table>
        </div>
      </div>
    </div>



    <footer class='p-5 footer' style="margin-top: 16rem;">
        <div class='container'>
          <div class='row'>
            <div class='col-12 col-md-4'>
              <div class='pr-lg-5'>
                <h1 class='heading h6 text-uppercase font-weight-700 mb-3'>
                  <strong>VeraLoans</strong>
                </h1>
              </div>
            </div>
          <hr />
          <div class='d-flex align-items-center'>
            <span class>
              Â© 2020
              <a href='/' class='footer-link' target='_blank'>
                VeraLoans
              </a>
              . All rights reserved.
            </span>
            <ul class='nav ml-lg-auto'>
              <li class='nav-item'>
                <a class='nav-link' href='https://github.com/'>
                  <i class='fab fa-github' />
                </a>
              </li>
            </ul>
          </div>
        </div>
      </footer>
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
